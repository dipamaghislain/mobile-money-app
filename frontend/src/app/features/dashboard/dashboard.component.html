// src/app/features/dashboard/dashboard.component.html
<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="welcome-text">
      <h1>Bonjour, {{ user()?.nomComplet }} </h1>
      <p class="account-number">Compte: {{ wallet()?.id }}</p>
    </div>
    <div class="header-actions">
      <button mat-icon-button>
        <mat-icon>notifications</mat-icon>
      </button>
      <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>account_circle</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item routerLink="/profile">
          <mat-icon>person</mat-icon>
          <span>Mon profil</span>
        </button>
        <button mat-menu-item (click)="logout()">
          <mat-icon>exit_to_app</mat-icon>
          <span>Déconnexion</span>
        </button>
      </mat-menu>
    </div>
  </div>

  <!-- Balance Card -->
  <div class="balance-card">
    <div class="balance-card-content">
      <div class="balance-info">
        <div class="balance-label">Solde disponible</div>
        <div class="balance-amount">{{ wallet()?.solde | currencyXOF }}</div>
        <div class="balance-subtitle">Dernière mise à jour: {{ now | date:'short' }}</div>
      </div>
      <div class="balance-actions">
        <button mat-raised-button class="balance-action-btn" (click)="quickAction('recharge')">
          <mat-icon>credit_card</mat-icon>
          Recharger
        </button>
        <button mat-raised-button class="balance-action-btn" (click)="quickAction('history')">
          <mat-icon>history</mat-icon>
          Historique
        </button>
        <button mat-raised-button class="balance-action-btn" (click)="quickAction('export')">
          <mat-icon>file_download</mat-icon>
          Exporter
        </button>
      </div>
    </div>
  </div>

  <!-- Statistics Cards -->
  <div class="stats-grid">
    <mat-card class="stat-card stat-income">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>arrow_downward</mat-icon>
        </div>
        <div class="stat-details">
          <div class="stat-label">Reçu ce mois</div>
          <div class="stat-value">{{ monthlyIncome | currencyXOF }}</div>
          <div class="stat-change positive">+12% vs mois dernier</div>
        </div>
      </div>
    </mat-card>

    <mat-card class="stat-card stat-expense">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>arrow_upward</mat-icon>
        </div>
        <div class="stat-details">
          <div class="stat-label">Dépensé ce mois</div>
          <div class="stat-value">{{ monthlyExpense | currencyXOF }}</div>
          <div class="stat-change negative">+5% vs mois dernier</div>
        </div>
      </div>
    </mat-card>

    <mat-card class="stat-card stat-savings">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>savings</mat-icon>
        </div>
        <div class="stat-details">
          <div class="stat-label">Épargne totale</div>
          <div class="stat-value">{{ totalSavings | currencyXOF }}</div>
          <div class="stat-change positive">Objectif: 80%</div>
        </div>
      </div>
    </mat-card>

    <mat-card class="stat-card stat-transactions">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>receipt_long</mat-icon>
        </div>
        <div class="stat-details">
          <div class="stat-label">Transactions</div>
          <div class="stat-value">{{ transactionCount }}</div>
          <div class="stat-change">Ce mois</div>
        </div>
      </div>
    </mat-card>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions-section">
    <h2 class="section-title">Actions rapides</h2>
    <div class="quick-actions-grid">
      <mat-card class="action-card deposit-card" (click)="navigateTo('/transactions/deposit')">
        <div class="action-icon-wrapper deposit-icon">
          <mat-icon>add_circle</mat-icon>
        </div>
        <div class="action-content">
          <h3 class="action-title">Dépôt</h3>
          <p class="action-description">Alimentez votre compte</p>
        </div>
        <mat-icon class="action-arrow">arrow_forward</mat-icon>
      </mat-card>

      <mat-card class="action-card withdraw-card" (click)="navigateTo('/transactions/withdraw')">
        <div class="action-icon-wrapper withdraw-icon">
          <mat-icon>remove_circle</mat-icon>
        </div>
        <div class="action-content">
          <h3 class="action-title">Retrait</h3>
          <p class="action-description">Retirez de l'argent</p>
        </div>
        <mat-icon class="action-arrow">arrow_forward</mat-icon>
      </mat-card>

      <mat-card class="action-card transfer-card" (click)="navigateTo('/transactions/transfer')">
        <div class="action-icon-wrapper transfer-icon">
          <mat-icon>send</mat-icon>
        </div>
        <div class="action-content">
          <h3 class="action-title">Transfert</h3>
          <p class="action-description">Envoyez de l'argent</p>
        </div>
        <mat-icon class="action-arrow">arrow_forward</mat-icon>
      </mat-card>

      

      <mat-card class="action-card savings-card" (click)="navigateTo('/savings')">
        <div class="action-icon-wrapper savings-icon">
          <mat-icon>account_balance_wallet</mat-icon>
        </div>
        <div class="action-content">
          <h3 class="action-title">Épargne</h3>
          <p class="action-description">Gérez votre épargne</p>
        </div>
        <mat-icon class="action-arrow">arrow_forward</mat-icon>
      </mat-card>
      
    </div>
  </div>

  <!-- Recent Transactions -->
  <div class="transactions-section">
    <div class="section-header">
      <h2 class="section-title">Transactions récentes</h2>
      <a class="view-all-link" routerLink="/transactions/history">
        Voir tout
        <mat-icon>arrow_forward</mat-icon>
      </a>
    </div>

    <div *ngIf="recentTransactions.length > 0; else noTransactions">
      <mat-card 
        class="transaction-item" 
        *ngFor="let transaction of recentTransactions"
        (click)="viewTransaction(transaction)">
        <div class="transaction-icon" [ngClass]="getTransactionIconClass(transaction.type)">
          <mat-icon>{{ getTransactionIcon(transaction.type) }}</mat-icon>
        </div>
        <div class="transaction-details">
          <div class="transaction-title">{{ getTransactionTitle(transaction) }}</div>
          <div class="transaction-date">{{ transaction.dateCreation | date:'dd/MM/yyyy HH:mm' }}</div>
          <div class="transaction-status" [ngClass]="'status-' + transaction.statut">
            {{ getTransactionStatusLabel(transaction.statut) }}
          </div>
        </div>
        <div class="transaction-amount" [ngClass]="getAmountClass(transaction.type)">
          {{ getAmountSign(transaction.type) }}{{ transaction.montant | currencyXOF }}
        </div>
      </mat-card>
    </div>

    <ng-template #noTransactions>
      <div class="empty-state">
        <mat-icon class="empty-icon">receipt_long</mat-icon>
        <p class="empty-text">Aucune transaction récente</p>
        <button mat-raised-button color="primary" routerLink="/transactions/deposit">
          Faire une transaction
        </button>
      </div>
    </ng-template>
  </div>
</div>