<div class="profile-container">
    <div class="profile-header">
        <h1>
            <mat-icon>account_circle</mat-icon>
            Mon Profil
        </h1>
    </div>

    <div class="profile-content">
        <!-- Informations personnelles -->
        <mat-card class="profile-card">
            <mat-card-header>
                <mat-card-title>
                    <mat-icon>person</mat-icon>
                    Informations personnelles
                </mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="info-row">
                    <span class="info-label">Nom complet</span>
                    <span class="info-value">{{ user()?.nomComplet || 'Non renseigné' }}</span>
                </div>
                <mat-divider></mat-divider>
                <div class="info-row">
                    <span class="info-label">Téléphone</span>
                    <span class="info-value">{{ user()?.telephone || 'Non renseigné' }}</span>
                </div>
                @if (user()?.email) {
                <mat-divider></mat-divider>
                <div class="info-row">
                    <span class="info-label">Email</span>
                    <span class="info-value">{{ user()?.email }}</span>
                </div>
                }
            </mat-card-content>
            <mat-card-actions>
                <button mat-button color="primary" routerLink="/profile/edit">
                    <mat-icon>edit</mat-icon>
                    <span>Modifier</span>
                </button>
            </mat-card-actions>
        </mat-card>

        <!-- Sécurité -->
        <mat-card class="profile-card">
            <mat-card-header>
                <mat-card-title>
                    <mat-icon>security</mat-icon>
                    Sécurité
                </mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="security-section">
                    <div class="security-item">
                        <div class="security-info">
                            <mat-icon>lock</mat-icon>
                            <div>
                                <h3>Code PIN</h3>
                                <p>Protège vos transactions financières (retrait, transfert, paiement)</p>
                                @if (hasPin() === null) {
                                <span class="status-text">Vérification...</span>
                                } @else if (hasPin()) {
                                <span class="status-text success">PIN défini</span>
                                } @else {
                                <span class="status-text warning">PIN non défini</span>
                                }
                            </div>
                        </div>
                        <button mat-raised-button color="primary" (click)="openPinModal()">
                            <mat-icon>{{ hasPin() ? 'edit' : 'add' }}</mat-icon>
                            <span>{{ hasPin() ? 'Modifier le PIN' : 'Définir le PIN' }}</span>
                        </button>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>

        <!-- Informations du compte -->
        <mat-card class="profile-card">
            <mat-card-header>
                <mat-card-title>
                    <mat-icon>account_balance_wallet</mat-icon>
                    Compte
                </mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="info-row">
                    <span class="info-label">Statut</span>
                    <span class="info-value">
                        <mat-chip color="primary">Actif</mat-chip>
                    </span>
                </div>
                @if (user()?.role) {
                <mat-divider></mat-divider>
                <div class="info-row">
                    <span class="info-label">Rôle</span>
                    <span class="info-value">{{ user()?.role }}</span>
                </div>
                }
            </mat-card-content>
        </mat-card>
    </div>
</div>
