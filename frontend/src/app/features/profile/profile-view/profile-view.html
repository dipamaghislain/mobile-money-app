<div class="profile-container">

    <!-- HEADER HERO -->
    <div class="gradient-hero">
        <div class="header-nav">
            <button class="back-btn" (click)="goBack()">
                <mat-icon>arrow_back</mat-icon>
            </button>
            <h1>Mon Profil</h1>
            <button class="edit-btn" routerLink="/profile/edit">
                <mat-icon>edit</mat-icon>
            </button>
        </div>

        <div class="profile-summary">
            <div class="avatar-container">
                <div class="avatar">
                    <span>{{ initials() }}</span>
                </div>
                @if (user()?.kycLevel && user()!.kycLevel! > 0) {
                <div class="verified-badge">
                    <mat-icon>verified</mat-icon>
                </div>
                }
            </div>
            <h2>{{ user()?.nomComplet }}</h2>
            <span class="phone-number">{{ user()?.telephone }}</span>
            <div class="role-badge" [class]="user()?.role">
                {{ user()?.role === 'marchand' ? 'üè™ Marchand' : user()?.role === 'admin' ? 'üëë Admin' : 'üë§ Client' }}
            </div>
        </div>
    </div>

    <!-- CONTENT -->
    <div class="content-wrapper">

        <!-- STATS GRID -->
        <div class="stats-grid">
            <mat-card class="stat-card balance-stat">
                <mat-icon class="stat-icon">account_balance_wallet</mat-icon>
                <div class="stat-info">
                    <div class="stat-value">{{ balance() | number:'1.0-0' }} <small>XOF</small></div>
                    <div class="stat-label">Solde disponible</div>
                </div>
            </mat-card>
            <mat-card class="stat-card savings-stat">
                <mat-icon class="stat-icon">savings</mat-icon>
                <div class="stat-info">
                    <div class="stat-value">{{ savings() | number:'1.0-0' }} <small>XOF</small></div>
                    <div class="stat-label">√âpargne totale</div>
                </div>
            </mat-card>
        </div>

        <!-- INFO PERSONNELLES -->
        <mat-card class="info-card">
            <div class="card-header-row">
                <h3>
                    <mat-icon>person</mat-icon>
                    Informations personnelles
                </h3>
            </div>
            <div class="info-list">
                <div class="info-item">
                    <div class="icon-box">
                        <mat-icon>phone</mat-icon>
                    </div>
                    <div class="info-text">
                        <span class="label">T√©l√©phone</span>
                        <span class="value">{{ user()?.telephone }}</span>
                    </div>
                    <mat-icon class="copy-icon" (click)="tempAction('Copi√©')">content_copy</mat-icon>
                </div>

                @if (user()?.email) {
                <div class="info-item">
                    <div class="icon-box">
                        <mat-icon>mail</mat-icon>
                    </div>
                    <div class="info-text">
                        <span class="label">Email</span>
                        <span class="value">{{ user()?.email }}</span>
                    </div>
                </div>
                }

                <div class="info-item">
                    <div class="icon-box">
                        <mat-icon>location_on</mat-icon>
                    </div>
                    <div class="info-text">
                        <span class="label">Pays</span>
                        <span class="value">{{ user()?.pays === 'BF' ? 'üáßüá´ Burkina Faso' : user()?.pays === 'CI' ? 'üá®üáÆ C√¥te d\'Ivoire' : user()?.pays === 'SN' ? 'üá∏üá≥ S√©n√©gal' : user()?.pays }}</span>
                    </div>
                </div>

                <div class="info-item">
                    <div class="icon-box">
                        <mat-icon>calendar_today</mat-icon>
                    </div>
                    <div class="info-text">
                        <span class="label">Membre depuis</span>
                        <span class="value">{{ user()?.dateCreation | date:'MMMM yyyy':'':'fr' }}</span>
                    </div>
                </div>
            </div>
        </mat-card>

        <!-- MENU NAVIGATION -->
        <mat-card class="menu-card">
            <h3 class="menu-title">
                <mat-icon>menu</mat-icon>
                Actions rapides
            </h3>
            
            <button class="menu-item" matRipple routerLink="/settings">
                <div class="icon-box security">
                    <mat-icon>shield</mat-icon>
                </div>
                <div class="menu-text">
                    <span class="menu-label">S√©curit√©</span>
                    <span class="menu-desc">PIN, mot de passe</span>
                </div>
                <mat-icon class="chevron">chevron_right</mat-icon>
            </button>

            <button class="menu-item" matRipple routerLink="/settings/change-pin">
                <div class="icon-box pin">
                    <mat-icon>lock</mat-icon>
                </div>
                <div class="menu-text">
                    <span class="menu-label">Changer le code PIN</span>
                    <span class="menu-desc">Modifiez votre code secret</span>
                </div>
                <mat-icon class="chevron">chevron_right</mat-icon>
            </button>

            <button class="menu-item" matRipple (click)="openChangePasswordDialog()">
                <div class="icon-box password">
                    <mat-icon>vpn_key</mat-icon>
                </div>
                <div class="menu-text">
                    <span class="menu-label">Changer le mot de passe</span>
                    <span class="menu-desc">Modifiez votre mot de passe</span>
                </div>
                <mat-icon class="chevron">chevron_right</mat-icon>
            </button>

            <button class="menu-item" matRipple routerLink="/notifications">
                <div class="icon-box notif">
                    <mat-icon>notifications</mat-icon>
                </div>
                <div class="menu-text">
                    <span class="menu-label">Notifications</span>
                    <span class="menu-desc">G√©rez vos alertes</span>
                </div>
                <mat-icon class="chevron">chevron_right</mat-icon>
            </button>

            <button class="menu-item" matRipple (click)="tempAction('Aide')">
                <div class="icon-box help">
                    <mat-icon>help_outline</mat-icon>
                </div>
                <div class="menu-text">
                    <span class="menu-label">Aide & Support</span>
                    <span class="menu-desc">FAQ, contact</span>
                </div>
                <mat-icon class="chevron">chevron_right</mat-icon>
            </button>

            <button class="menu-item logout" matRipple (click)="logout()">
                <div class="icon-box logout-icon">
                    <mat-icon>logout</mat-icon>
                </div>
                <div class="menu-text">
                    <span class="menu-label">D√©connexion</span>
                    <span class="menu-desc">Se d√©connecter du compte</span>
                </div>
            </button>
        </mat-card>

        <!-- Version -->
        <div class="app-version">
            <span>Mobile Money App v1.0.0</span>
        </div>

    </div>

    <!-- Bottom Navigation -->
    <app-bottom-nav></app-bottom-nav>
</div>